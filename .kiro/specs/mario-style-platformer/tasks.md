# Implementation Plan

- [x] 1. プロジェクト基盤とコア構造の設定

  - HTML、CSS、JavaScript ファイルの基本構造を作成
  - Canvas 要素とゲームコンテナの HTML マークアップを実装
  - 基本的な CSS スタイリングとレスポンシブレイアウトを設定
  - _Requirements: 6.1, 6.2_

- [x] 2. ゲームエンジンコアの実装

  - GameEngine クラスとゲームループ（update/render）を実装
  - deltaTime 計算とフレームレート管理を追加
  - 基本的なゲーム状態管理システムを作成
  - _Requirements: 2.1, 2.2_

- [x] 3. 入力管理システムの実装

  - InputManager クラスでキーボード入力を処理
  - キー状態の追跡（pressed, held, released）を実装
  - プレイヤー操作用のキーバインディングを設定
  - _Requirements: 1.1, 1.2, 1.3, 1.4_

- [x] 4. 基本的な物理エンジンの実装

  - PhysicsEngine クラスで重力システムを実装
  - 基本的な衝突判定（AABB）を作成
  - エンティティの位置と速度の更新システムを実装
  - _Requirements: 2.3_

- [x] 5. プレイヤーキャラクターの実装
- [x] 5.1 Player クラスの基本構造を作成

  - プレイヤーの位置、速度、状態プロパティを定義
  - 基本的な描画メソッドを実装（矩形プレースホルダー）
  - プレイヤーの境界ボックスを設定
  - _Requirements: 1.1, 1.2_

- [x] 5.2 プレイヤーの移動とジャンプを実装

  - 左右移動の処理を追加
  - ジャンプ機能と重力の適用を実装
  - 地面との衝突判定を追加
  - _Requirements: 1.1, 1.2_

- [x] 5.3 ダッシュとブロック機能を実装

  - ダッシュ時の速度増加とクールダウンを追加
  - ブロック状態での移動制限を実装
  - 状態遷移の管理を追加
  - _Requirements: 1.3, 1.4_

- [x] 6. ステージとプラットフォームシステムの実装
- [x] 6.1 基本的なステージクラスを作成

  - Stage クラスでプラットフォームデータを管理
  - 静的プラットフォームの描画を実装
  - プラットフォームとプレイヤーの衝突判定を追加
  - _Requirements: 2.1, 2.3_

- [x] 6.2 カメラとスクロールシステムを実装

  - Camera クラスでプレイヤー追従を実装
  - 横スクロールの境界制限を設定
  - スムーズなカメラ移動を追加
  - _Requirements: 2.2_

- [x] 7. アイテムシステムの実装
- [x] 7.1 基本的なアイテムクラスを作成

  - Item クラスの基本構造を実装
  - アイテムの描画と衝突判定を追加
  - アイテム取得時の削除処理を実装
  - _Requirements: 3.1, 4.1_

- [x] 7.2 コインシステムを実装

  - Coin クラスを作成してアイテムから継承
  - コイン取得時のスコア増加を実装
  - コイン数の表示 UI を追加
  - _Requirements: 4.1, 4.3_

- [x] 7.3 パワーアップアイテムを実装

  - PowerUp クラスでプレイヤー能力向上を実装
  - 無敵アイテムと時間制限システムを追加
  - パワーアップ状態の視覚的フィードバックを実装
  - _Requirements: 3.1, 3.2, 3.3, 3.4_

- [x] 8. 音響システムの実装
- [x] 8.1 AudioManager クラスを作成

  - 音声ファイルの読み込みと管理を実装
  - 効果音の再生機能を追加
  - 音量制御システムを実装
  - _Requirements: 5.1, 5.2, 5.3, 5.4_

- [x] 8.2 ゲームアクション用効果音を統合

  - ジャンプ、アイテム取得、敵撃破の効果音を追加
  - 各アクションでの音声再生を実装
  - 効果音の重複再生制御を追加
  - _Requirements: 5.1, 5.2, 5.3, 5.4_

- [x] 9. UI とスコアシステムの実装
- [x] 9.1 ゲーム内 UI を作成

  - スコア、コイン数、ライフの表示を実装
  - HUD の配置とスタイリングを追加
  - リアルタイムでの数値更新を実装
  - _Requirements: 4.3, 4.4_

- [x] 9.2 スタート画面を実装

  - StartScreen クラスでメニュー画面を作成
  - スタートボタンと設定ボタンを追加
  - ボタンクリックでのシーン遷移を実装
  - _Requirements: 6.1, 6.2, 6.3_

- [x] 10. シーン管理システムの実装
- [x] 10.1 SceneManager クラスを作成

  - シーン切り替えの基本機能を実装
  - 各シーンの初期化と終了処理を追加
  - シーン間でのデータ受け渡しを実装
  - _Requirements: 6.1, 6.2, 6.3_

- [x] 10.2 設定画面を実装

  - SettingsScene クラスで設定 UI を作成
  - 音量調整スライダーを追加
  - 設定の保存と読み込みを実装
  - _Requirements: 6.4_

- [x] 11. ゴールとステージクリアシステムの実装
- [x] 11.1 ゴールオブジェクトを作成

  - Goal クラスでゴール判定を実装
  - プレイヤーとゴールの衝突検出を追加
  - ゴール到達時の処理を実装
  - _Requirements: 2.4_

- [x] 11.2 ステージクリア演出を実装

  - クリア時のアニメーションと効果音を追加
  - 最終スコアの計算と表示を実装
  - 次のステージへの遷移を追加
  - _Requirements: 2.4, 4.4, 5.4_

- [x] 12. ゲーム統合とテスト
- [x] 12.1 全システムの統合テスト

  - 各コンポーネント間の連携を確認
  - ゲームフローの完全なテストを実行
  - パフォーマンスの最適化を実施
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 2.1, 2.2, 2.3, 2.4_

- [x] 12.2 ブラウザ互換性テストとバグ修正

  - 主要ブラウザでの動作確認を実行
  - 発見されたバグの修正を実施
  - ユーザビリティの改善を追加
  - _Requirements: 全要件の動作確認_

- [x] 13. ローカルストレージによる基本セーブ機能
- [x] 13.1 ローカルセーブシステムを実装

  - LocalStorage を使用したデータ保存を実装
  - ゲーム進行状況の保存と読み込みを追加
  - 設定データの永続化を実装
  - _Requirements: 7.1, 7.2, 7.3_

- [x] 13.2 ステージ選択画面を実装
  - StageSelectScene クラスを作成
  - クリア済みステージの表示を実装
  - ステージ選択からのゲーム開始を追加
  - _Requirements: 7.3_
